!function(){return function e(t,n,a){function s(o,r){if(!n[o]){if(!t[o]){var l="function"==typeof require&&require;if(!r&&l)return l(o,!0);if(i)return i(o,!0);var c=new Error("Cannot find module '"+o+"'");throw c.code="MODULE_NOT_FOUND",c}var d=n[o]={exports:{}};t[o][0].call(d.exports,function(e){return s(t[o][1][e]||e)},d,d.exports,e,t,n,a)}return n[o].exports}for(var i="function"==typeof require&&require,o=0;o<a.length;o++)s(a[o]);return s}}()({1:[function(e,t,n){var a=e("./lib/defaultHtmlSequencerUi.js"),s=e("./lib/cache.js"),i=e("./lib/defaultHtmlStepUi.js"),o=e("./lib/urlHash.js"),r=e("./lib/insertPreview.js");window.onload=function(){function e(){var e=sequencer.modulesInfo(),t=$("#addStep select");for(var n in t.html(""),e)e[n]&&e[n].name&&t.append('<option value="'+n+'">'+e[n].name+"</option>");t.append('<option value="none" disabled selected>More modules...</option>')}sequencer=ImageSequencer(),e(),$(window).on("scroll",function(){var e=$("body").scrollTop()>20||$(":root").scrollTop()>20;$("#move-up").css({display:e?"block":"none"})}),$("#move-up").on("click",function(){$("body").animate({scrollTop:0}),$(":root").animate({scrollTop:0})}),sequencer.setUI(i(sequencer));var t=a(sequencer);o.getUrlHashParameter("src")?sequencer.loadImage(o.getUrlHashParameter("src"),t.onLoad):sequencer.loadImage("images/tulips.png",t.onLoad);$("#addStep select").on("change",t.selectNewStepUi),$("#addStep #add-step-btn").on("click",t.addStepUi),$("#resetButton").on("click",function(){confirm("Do you want to reset the sequence?")&&(window.location="/")}),$(".radio-group .radio").on("click",function(){$(this).parent().find(".radio").removeClass("selected"),$(this).addClass("selected"),newStep=$(this).attr("data-value"),$("#addStep select").val(newStep),t.selectNewStepUi(),t.addStepUi(),$(this).removeClass("selected")}),$("#download-btn").click(function(){return $(".step-thumbnail:last()").trigger("click"),!1}),$("body").on("click","button.remove",t.removeStepUi),$("#save-seq").click(()=>{var t=window.prompt("Please give a name to your sequence... (Saved sequence will only be available in this browser).");t&&(t+=" (local)",sequencer.saveSequence(t,sequencer.toString()),sequencer.loadModules(),$(".savesequencemsg").fadeIn(),setTimeout(function(){$(".savesequencemsg").fadeOut()},1e3),e())});var n=!1;$(".js-view-as-gif").on("click",function(e){if(!n){n=!0;var t=e.target;t.disabled=!0;try{for(var a=document.getElementsByClassName("step-thumbnail"),s=[],i=0;i<a.length;i++)s.push(a[i].src);var o={gifWidth:a[0].width,gifHeight:a[0].height,images:s,frameDuration:7};gifshot.createGIF(o,function(e){if(!e.error){var a=e.image,s=document.createElement("img");s.id="gif_element",s.src=a;var i=$("#js-download-gif-modal");$("#js-download-as-gif-button").one("click",function(){download(a,"index.gif","image/gif"),i.modal("hide")});var o=document.getElementById("js-download-modal-gif-container");o.innerHTML="",o.appendChild(s),i.modal(),t.disabled=!1,n=!1}})}catch(e){console.error(e),t.disabled=!1,n=!1}}}),sequencer.setInputStep({dropZoneSelector:"#dropzone",fileInputSelector:"#fileInput",takePhotoSelector:"#take-photo",onLoad:function(e){var t=e.target,n=sequencer.images.image1.steps[0];IntermediateHtmlStepUi(sequencer);n.output.src=t.result,sequencer.run({index:0}),n.options.step.imgElement.src=t.result,r.updatePreviews(t.result,"addStep"),r.updatePreviews(sequencer.images.image1.steps[0].options.step.imgElement.src,"insertStep")},onTakePhoto:function(e){var t=sequencer.images.image1.steps[0];t.output.src=e,sequencer.run({index:0}),t.options.step.imgElement.src=e}}),s(),o.getUrlHashParameter("src")?r.updatePreviews(o.getUrlHashParameter("src"),"addStep"):r.updatePreviews("images/tulips.png","addStep")}},{"./lib/cache.js":2,"./lib/defaultHtmlSequencerUi.js":3,"./lib/defaultHtmlStepUi.js":4,"./lib/insertPreview.js":5,"./lib/urlHash.js":8}],2:[function(e,t,n){t.exports=function(){"serviceWorker"in navigator&&navigator.serviceWorker.register("sw.js",{scope:"/examples/"}).then(function(e){const t=e.installing;t.onstatechange=(()=>{console.log(t),"installed"===t.state&&location.reload()}),console.log("Registration successful, scope is:",e.scope)}).catch(function(e){console.log("Service worker registration failed, error:",e)}),"serviceWorker"in navigator&&caches.keys().then(function(e){e.forEach(function(e){$("#clear-cache").append(" "+e)})}),$("#clear-cache").click(function(){"serviceWorker"in navigator&&caches.keys().then(function(e){e.forEach(function(e){caches.delete(e)})}),location.reload()})}},{}],3:[function(e,t,n){var a=e("./urlHash.js");t.exports=function(e,t){var n=(t=t||{}).addStepSel=t.addStepSel||"#addStep",s=t.removeStepSel=t.removeStepSel||"button.remove";function i(){var t=a.getUrlHashParameter("steps");t&&(e.importString(t),e.run({index:0})),a.setUrlHashParameter("steps",sequencer.toString())}function o(){sequencer.images.image1.steps.length<2?$(" #save-seq").prop("disabled",!0):$(" #save-seq").prop("disabled",!1)}return t.selectStepSel=t.selectStepSel||"#selectStep",{onLoad:function(){i(),$("#selectStep").val()||$(n+" #add-step-btn").prop("disabled",!0),o()},importStepsFromUrlHash:i,selectNewStepUi:function(){var t=$(n+" select").val();$(n+" .info").html(e.modulesInfo(t).description),$(n+" #add-step-btn").prop("disabled",!1)},removeStepUi:function(){var e=$(s).index(this)+1;sequencer.removeSteps(e).run({index:e-1}),a.setUrlHashParameter("steps",sequencer.toString()),o()},addStepUi:function(){if("none"!=$(n+" select").val()){var s=$(n+" select").val(),i=1;sequencer.sequences[s]?i=sequencer.sequences[s].length:sequencer.modules[s][1].length&&(i=sequencer.modules[s][1].length),e.addSteps(s,t).run({index:e.images.image1.steps.length-i-1}),$(n+" .info").html("Select a new module to add to your sequence."),o(),a.setUrlHashParameter("steps",e.toString())}}}}},{"./urlHash.js":8}],4:[function(e,t,n){var a,s=e("./intermediateHtmlStepUi.js"),i=e("./urlHash.js"),o=e("./scopeQuery");function r(e,t){var n=(t=t||{}).stepsEl||document.querySelector("#steps");t.selectStepSel=t.selectStepSel||"#selectStep";function r(e,t){if(0==$("#"+t).length){var n=document.createElement("span");n.innerHTML=' <i class="fa fa-info-circle" aria-hidden="true"></i> '+e,n.id=t,n.classList.add("notification"),$("body").append(n)}$("#"+t).fadeIn(500).delay(200).fadeOut(500)}return{getPreview:function(){return step.imgElement},onSetup:function(t,l){t.options&&t.options.description&&(t.description=t.options.description),t.ui='      <div class="container">    <div class="row step">    <form class="input-form">    <div class="col-md-4 details">    <h3>    <span class = "toggle">'+t.name+' <i class="fa fa-caret-up toggleIcon" aria-hidden="true"></i></span><span class="load-spin" style="display:none;"><i class="fa fa-circle-o-notch fa-spin"></i></span></h3><div class="cal"><p><i>"'+(t.description||"")+'</i></p></div>    </div>    </form>    <div class="col-md-8 cal">    <div class="load" style="display:none;"><i class="fa fa-circle-o-notch fa-spin"></i></div>    <a><img alt="" style="max-width=100%" class="img-thumbnail step-thumbnail"/></a>    </div>    </div>    </div>    </div>';var c=s(e,t),d=new DOMParser;if(t.ui=d.parseFromString(t.ui,"text/html"),t.ui=t.ui.querySelector("div.container"),t.linkElements=t.ui.querySelectorAll("a"),t.imgElement=t.ui.querySelector("a img"),a=o.scopeSelector(t.ui),o.scopeSelectorAll(t.ui),e.modulesInfo().hasOwnProperty(t.name)){var u=e.modulesInfo(t.name).inputs,p=e.modulesInfo(t.name).outputs,m=Object.assign(u,p);for(var f in m){var v=u.hasOwnProperty(f),h="",g=v?u[f]:{};if(v)if("select"==g.type.toLowerCase()){for(var S in h+='<select class="form-control target" name="'+f+'">',g.values)h+="<option>"+g.values[S]+"</option>";h+="</select>"}else{let e=t.options[f]||g.default;h='<input class="form-control target" type="'+g.type+'" name="'+f+'" value="'+e+'" placeholder ="'+(g.placeholder||""),"range"==g.type.toLowerCase()?h+='"min="'+g.min+'"max="'+g.max+'"step="'+g.step+'"><span>'+e+"</span>":h+='">'}else h+='<span class="output"></span>';var b=document.createElement("div");b.className="row",b.setAttribute("name",f);var w=u[f].desc||f;b.innerHTML="<div class='det cal'>                           <label for='"+f+"'>"+w+"</label>                           "+h+"                         </div>",t.ui.querySelector("div.details").appendChild(b)}a("div.details").append('<div class="cal"><p><button type="submit" class="btn btn-default btn-save" disabled = "true" >Apply</button><span> Press apply to see changes</span></p></div>')}"load-image"!=t.name?(t.ui.querySelector("div.details").appendChild(d.parseFromString('<div class="cal"><div class="tools btn-group">    <button confirm="Are you sure?" class="remove btn btn btn-default">      <i class="fa fa-trash"></i>    </button>    <button class="btn  insert-step" style="margin-left:10px;border-radius:6px;background-color:#fff;border:solid #bababa 1.1px;" >      <i class="fa fa-plus"></i> Add    </button>    </div>    </div>',"text/html").querySelector("div")),a(".remove").on("click",function(){r("Step Removed","remove-notification")}).elemAll(".insert-step").on("click",function(){c.insertStep(t.ID)}),l.index==e.images.image1.steps.length?(n.appendChild(t.ui),$("#steps .container:nth-last-child(1) .insert-step").prop("disabled",!0),$("#steps .container:nth-last-child(2)")&&$("#steps .container:nth-last-child(2) .insert-step").prop("disabled",!1)):n.insertBefore(t.ui,$(n).children()[l.index])):$("#load-image").append(t.ui),a(".toggle").on("click",()=>{a(".toggleIcon").toggleClass("fa-caret-up").toggleClass("fa-caret-down").elemAll(".cal").toggleClass("collapse")});var q=0,y=!1;a(".input-form").on("submit",function(n){n.preventDefault(),y&&(a("div.details").find("input,select").each(function(e,n){$(n).data("initValue",$(n).val()).data("hasChangedBefore",!1),t.options[$(n).attr("name")]=$(n).val()}),e.run({index:t.index-1}),i.setUrlHashParameter("steps",e.toString()),a(".btn-save").prop("disabled",!0),y=!1,q=0)}).elemAll(".target").each(function(e,t){$(t).data("initValue",$(t).val()).data("hasChangedBefore",!1).on("input",function(){var e,t,n,s;$(this).focus().data("hasChangedBefore",(e=$(this).val(),t=$(this).data("initValue"),n=$(this).data("hasChangedBefore"),s=!(isNaN(t)||isNaN(e)?e===t:e-t==0),y=(q+=n?s?0:-1:s?1:0)>0,a(".btn-save").prop("disabled",!y),s))})}),$('input[type="range"]').on("input",function(){$(this).next().html($(this).val())})},onComplete:function(t){a(".load").hide().elem("img").show().elem(".load-spin").hide(),t.imgElement.src=t.output;var n=t.ui.querySelector(".img-thumbnail");for(let e=0;e<t.linkElements.length;e++)t.linkElements[e].contains(n)&&(t.linkElements[e].href=t.output);for(let e=0;e<t.linkElements.length;e++)t.linkElements[e].download=t.name+"."+t.output.split("/")[1].split(";")[0],t.linkElements[e].target="_blank";if(e.modulesInfo().hasOwnProperty(t.name)){var s=e.modulesInfo(t.name).inputs,i=e.modulesInfo(t.name).outputs;for(var o in s)void 0!==t.options[o]&&("input"===s[o].type.toLowerCase()&&a('div[name="'+o+'"] input').val(t.options[o]).data("initValue",t.options[o]),"select"===s[o].type.toLowerCase()&&a('div[name="'+o+'"] select').val(t.options[o]).data("initValue",t.options[o]));for(var o in i)void 0!==t[o]&&a('div[name="'+o+'"] input').val(t[o])}},onRemove:function(e){e.ui.remove(),$("#steps .container:nth-last-child(1) .insert-step").prop("disabled",!0),$("div[class^=imgareaselect-]").remove()},onDraw:function(){a(".load").show().elem("img").hide(),a(".toggleIcon").hasClass("fa-caret-down")&&a(".load-spin").show()},notify:r}}"undefined"==typeof window&&(t.exports={DefaultHtmlStepUi:r}),t.exports=r},{"./intermediateHtmlStepUi.js":6,"./scopeQuery":7,"./urlHash.js":8}],5:[function(e,t,n){function a(e,t,n,a){var s=ImageSequencer();function i(t){var n=document.createElement("img");n.classList.add("img-thumbnail"),n.classList.add("no-border"),n.src=t,$(n).css("max-width","200%"),$(n).css("transform","translateX(-20%)");$("#"+a+" .row").find("div").each(function(){$(this).find("div").attr("data-value")===e&&$(this).find("div").append(n)})}s.loadImage(n,function(){s=s.addSteps("resize",{resize:"40%"}),"crop"===e?s.addSteps(e,t).run(i):s.addSteps(e,{[e]:t}).run(i)})}t.exports={generatePreview:a,updatePreviews:function(e,t){$("#"+t+" img").remove();var n={brightness:"20",saturation:"5",rotate:90,contrast:90,crop:{x:0,y:0,w:"(50%)",h:"(50%)",noUI:!0}};Object.keys(n).forEach(function(s,i){a(s,Object.values(n)[i],e,t)})}}},{}],6:[function(e,t,n){var a=e("./urlHash.js");t.exports=function(e,t,n){function s(){var t=$("#insertStep select").val();$("#insertStep .info").html(e.modulesInfo(t).description),$("#insertStep #add-step-btn").prop("disabled",!1)}function i(t){n=n||{};var s=$("#insertStep select");if("none"!=s.val()){var i=s.val();$("div .insertDiv").remove(),sequencer.sequences[i]?sequencer.sequences[i].length:sequencer.modules[i][1].length&&sequencer.modules[i][1].length,e.insertSteps(t+1,i).run({index:t}),a.setUrlHashParameter("steps",e.toString())}}return insertStep=function(n){var a=e.modulesInfo(),o='<div class="row insertDiv">        <div class="col-md-6 col-md-offset-2" style="margin-top:5%">        <section id="insertStep" class="panel panel-primary">          <div class="form-inline">            <div class="panel-body">              <p class="info">Select a new module to add to your sequence.</p>              <div class="row center-align radio-group">                <div>                <div class="radio" data-value="brightness">                <i class="fa fa-sun-o fa-4x i-over"></i>              </div>                  <p>Brightness</p>                </div>                <div>                <div class="radio" data-value="contrast">                <i class="fa fa-adjust fa-4x i-over"></i>              </div>                  <p>Contrast</p>                </div>                <div>                <div class="radio" data-value="saturation">                <i class="fa fa-tint fa-4x i-over i-small"></i>              </div>                  <p>Saturation</p>                </div>                <div>                <div class="radio" data-value="rotate">                <i class="fa fa-rotate-right fa-4x i-over"></i>              </div>                  <p>Rotate</p>                </div>                <div>                <div class="radio" data-value="crop">                <i class="fa fa-crop fa-4x i-over"></i>              </div>                  <p>Crop</p>                </div>              </div>              <div class="center-align">                <select class="form-control input-lg" id="selectStep">                  \x3c!-- The default null selection has been appended manually in demo.js                  This is because the options in select are overritten when options are appended.--\x3e                </select>                <button class="btn btn-success btn-lg" name="add" id="add-step-btn">Add Step</button>              </div>            </div>          </div>        </section>        </div>';o=(new DOMParser).parseFromString(o,"text/html").querySelector("div"),t.ui.querySelector("div.step").insertAdjacentElement("afterend",o),updatePreviews(t.output,"insertStep");var r=$("#insertStep select");for(var l in r.html(""),a)void 0!==a[l]&&r.append('<option value="'+l+'">'+a[l].name+"</option>");$("#insertStep #add-step-btn").prop("disabled",!0),r.append('<option value="none" disabled selected>More modules...</option>'),$("#insertStep .radio-group .radio").on("click",function(){$(this).parent().find(".radio").removeClass("selected"),$(this).addClass("selected"),newStep=$(this).attr("data-value"),r.val(newStep),s(),i(n),$(this).removeClass("selected")}),$step("#insertStep select").on("change",s).elem("#insertStep #add-step-btn").on("click",function(){i(n)})},{insertStep:insertStep}}},{"./urlHash.js":8}],7:[function(e,t,n){function a(e){return function(t){var n=$(e.querySelector(t));return n.elem=function(t){return new a(e)(t)},n.elemAll=function(t){return new s(e)(t)},n}}function s(e){return function(t){var n=$(e.querySelectorAll(t));return n.elem=function(t){return new a(e)(t)},n.elemAll=function(t){return new s(e)(t)},n}}t.exports={scopeSelector:function(e){return a(e)},scopeSelectorAll:function(e){return s(e)}}},{}],8:[function(e,t,n){function a(){var e=window.location.hash;e&&(e=e.split("#")[1]);var t={};return e.split("&").forEach(function(e,n){""!=(e=e.split("="))[0]&&(t[e[0]]=e[1])}),t}function s(e){var t=Object.keys(e),n=Object.values(e),a=[];t.forEach(function(e,s){""!=e&&a.push(t[s]+"="+n[s])});var s=a.join("&");window.location.hash=s}t.exports={getUrlHashParameter:function(e){return a()[e]},setUrlHashParameter:function(e,t){var n=a();n[e]=t,s(n)},getUrlHashParameters:a,setUrlHashParameters:s}},{}]},{},[1]);